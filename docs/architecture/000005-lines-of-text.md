# Lines of Text

### Submitters

- Fran Tufro

## Change Log

- 2025-01-21 - [First Draft of ADR created](https://github.com/hiddenpeopleclub/cuentitos/pull/52).

## Context

Cuentitos language wants to be as writer friendly as possible, because of that
is going to be text-first.

We want to support a scripting format that will let a writer do as much as they
can with text, minimizing the use of mouse or additional tools.

The first step is to support writing lines of text that get parsed and
transformed into objects that can be processed by the runtime.

## Proposed Design

I will split functionality from data when it comes to string management.

The parser will iterate through all the script and provide an id to each line
of text, this id will be used to reference the line of text in the string table.

This is to better support internationalization, as the string table will be
replaced by the correct language at runtime.

## Implementation Details

The `parser` project takes care of all things parsing.

Inside of it, the `line_parser` module is in charge of processing each line of code from scripts.

The `parse` method generates a temporary `Line` object that holds the script line and if it has been parsed or not.

Inside the `line_parser` module there are multiple modules that implement the parsing specifics of all the language features.

`line_parser` passes the `Line` object through all of these modules until one of them "catches" it and successfully parses the `Line` deciding what to do with it.

If a module processes the line successfully, the `line_parser` returns the generated `Block` and any text strings that got generated by the module to the main `parse` method.

I believe this design will render an architecture that is easy to maintain as each language feature is implemented in its own module, without interfering with the other features.


